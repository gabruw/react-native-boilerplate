#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ğŸš€ğŸš€ Starting pre-commit scripts ğŸš€ğŸš€ğŸš€";
echo "ğŸºğŸºğŸº Hello my name is Husky and I'll help you with your code";
echo "";

echo "1 - ğŸ’…ğŸ’…ğŸ’… It's time to format you code!";

yarn format ||
(
    echo "ğŸ¤¢ğŸ¤®ğŸ¤¢ğŸ¤® It's FU**ING RAW!!! Your styling looks disgusting ğŸ¤¢ğŸ¤®ğŸ¤¢ğŸ¤®";
    echo "Format failed, run 'yarn format' to try again";

    false;
)

echo "";
echo "ğŸ¤”ğŸ¤”ğŸ¤”... Alright... Your code looks good to me, I'll try to build now";

echo "";
echo "|-------------------------------------------------------------------------|";
echo "";

echo "2 - ğŸ—ï¸ğŸ”¨ğŸ‘· I called Bob to help us, because it's time to build!";

yarn prebuild ||
(
    echo "âŒğŸ‘·ğŸ”¨âŒ Glad Bob is here... âŒğŸ‘·ğŸ”¨âŒ";
    echo "Build failed, run 'yarn prebuild' to try again";

    false;
)

echo "";
echo "ğŸ¤”ğŸ¤”ğŸ¤”... Great... Your code was builded, I'll package all for you";

echo "";
echo "|-------------------------------------------------------------------------|";
echo "";

echo "3 - ğŸ“¦ğŸ“¦ğŸ“¦ Can a dog pack something? Well, it's time to pack!";

git add android/* -f ||
(
    echo "ğŸ”¥ğŸ“¦ğŸ”¥ğŸ“¦ I don't know how but this is on fire ğŸ”¥ğŸ“¦ğŸ”¥ğŸ“¦";
    echo "Stage changes failed, run 'git add .' to try again";

    false;
)

echo "";
echo "ğŸ‰ğŸ‰ğŸ‰ Well... you win this time... I'm committing this now!!! ğŸ‰ğŸ‰ğŸ‰";
echo "";
